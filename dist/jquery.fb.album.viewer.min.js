/*
 * https://github.com/research-and-develop/jquery-fb-album-viewer
 * Released under the MIT license
 */
!function(a){a.fn.FacebookAlbumViewer=function(b){var c={STYLE_ID:"fb-album-viewer-style",API_URL:"https://graph.facebook.com/",FIELDS:["id","created_time","from","height","icon","images","link","name","picture","updated_time","width","source"],TMPL_IMG:'<div class="fav-col fav-xxs-12 fav-lg-3 fav-md-3 fav-sm-4 fav-xs-6">   <div class="image-wrapper" id="[@img-id@]">      <a target="_blank" href="[@img-href@]">         <img src="[@img-url@]" class="fb-album-viewer-img">      </a>      [@likes-box@]   </div></div>',TMPL_LIKES_BOX:'<table class="likes-box">   <tbody>      <tr>         <td valign="middle"><img src="https://embedsocial.com/image/like.png"></td>         <td valign="middle"><span class="likes"></span></td>      </tr>   </tbody></table>',TAG_IMG_HREF:"[@img-href@]",TAG_IMG_ID:"[@img-id@]",TAG_IMG_URL:"[@img-url@]",TAG_LIKES:"[@likes-box@]"},d={account:"",accessToken:"",albumId:"",showLikes:!1,debug:!1,containerWidth:820,imgFixedWidth:!0},e=a(this),f=a.extend({},d,b),g=null,h='<style type="text/css" id="'+c.STYLE_ID+'">';h+=".fav-img-fixed{float: left; padding:0px 5px;}",h+='.fb-album-viewer-wrapper:before,.fb-album-viewer-wrapper:after{display: table;content: " ";}.fb-album-viewer-wrapper:after{clear: both;}',h+=".fav-col{position: relative;min-height: 1px;padding-right: 15px;padding-left: 15px;}",h+=".likes-box { background-color: rgba(0, 0, 0, 0.5); color: white; position: absolute; left: 5px; bottom: 10px; padding: 0px 5px; z-index: 1; font-size: 12px; display: block; border-radius: 3px;}",h+=".likes{color:white;}",h+=".fb-album-viewer-img{position: absolute; top: -9999px; left: -9999px; right: -9999px; bottom: -9999px; margin: auto;}",h+=".image-wrapper{position: relative; overflow: hidden; margin:5px auto;}.image-wrapper img{max-width: none;}",h+=".fav-xs-1,.fav-xs-2,.fav-xs-3,.fav-xs-4,.fav-xs-5,.fav-xs-6,.fav-xs-7,.fav-xs-8,.fav-xs-9,.fav-xs-10,.fav-xs-11,.fav-xs-12{float: left;}.fav-xs-12{width: 100%;}.fav-xs-11 {width: 91.66666667%;}.fav-xs-10 {width: 83.33333333%;}.fav-xs-9 {width: 75%;}.fav-xs-8 {width: 66.66666667%;}.fav-xs-7 {width: 58.33333333%;}.fav-xs-6 {width: 50%;}.fav-xs-5 {width: 41.66666667%;}.fav-xs-4 {width: 33.33333333%;}.fav-xs-3 {width: 25%;}.fav-xs-2 {width: 16.66666667%;}.fav-xs-1 {width: 8.33333333%;}",h+=".image-wrapper{width: 190px; height: 190px;}",h+=" @media (min-width: 1200px) {.fav-lg-1, .fav-lg-2, .fav-lg-3, .fav-lg-4, .fav-lg-5, .fav-lg-6, .fav-lg-7, .fav-lg-8, .fav-lg-9, .fav-lg-10, .fav-lg-11, .fav-lg-12 {float: left;}.fav-lg-12 {width: 100%;}.fav-lg-11 {width: 91.66666667%;}.fav-lg-10{width: 83.33333333%;}.fav-lg-9 {width: 75%;}.fav-lg-8{width: 66.66666667%;}.fav-lg-7{width: 58.33333333%;}.fav-lg-6{width: 50%;}.fav-lg-5{width: 41.66666667%;}.fav-lg-4{width: 33.33333333%;}.fav-lg-3{width: 25%;}.fav-lg-2{width: 16.66666667%;}.fav-lg-1{width: 8.33333333%;}}",h+="</style>";var i=function(){var d=!1;a("head").children().each(function(a,b){if("STYLE"==b.tagName&&b.id==c.STYLE_ID)return d=!0,!1}),d||a(h).appendTo("head")},j=function(){if(!f.accessToken.length)return void console.error("accessToken is missing cannot proceed ...");if(!f.albumId.length)return void console.error("albumId is missing cannot proceed ...");var b=c.API_URL+f.albumId+"/photos?access_token="+f.accessToken+"&fields="+c.FIELDS.join(",");n(b).then(function(a,b,c){m("success ..."),m(a),"undefined"!=typeof a.data&&k(a.data)},function(a,b,c){m("failed ..."),m(c)})},k=function(d){for(var h="",i=0;i<d.length;i++){var j=d[i];h+=c.TMPL_IMG.replace(c.TAG_IMG_HREF,j.link).replace(c.TAG_IMG_ID,j.id).replace(c.TAG_IMG_URL,j.images[j.images.length-1].source).replace(c.TAG_LIKES,f.showLikes?c.TMPL_LIKES_BOX:"")}if(e.html('<div class="fb-album-viewer-wrapper">'+h+"</div>"),f.showLikes)for(var i=0;i<d.length;i++){var j=d[i];!function(b){n(c.API_URL+b+"/likes?access_token="+f.accessToken).then(function(c,d,e){a("#"+b).find(".likes")[0].innerHTML=c.data.length},function(a,b,c){console.log(c)})}(j.id)}f.imgFixedWidth&&(e.find(".image-wrapper").parent().removeClass("fav-col fav-xxs-12 fav-lg-3 fav-md-3 fav-sm-4 fav-xs-6").addClass("fav-img-fixed"),g=e.find(".fb-album-viewer-wrapper").first(),l(),a(window).on("resize",l))},l=function(){var c=a(window).width();c=c>f.containerWidth?f.containerWidth:c;var d=e.find(".image-wrapper").first(),h=d.width(),i=parseFloat(d.parent().css("paddingLeft"))+parseFloat(d.parent().css("paddingRight")),j=Math.floor(c/(h+i)),k=h*j+i*j;if(g.css({width:k+"px",margin:" 0px auto"}),c<f.containerWidth){var l=(c-k)/2;if(j<4?e.css({paddingLeft:l,paddingRight:l}):e.css({paddingLeft:"",paddingRight:""}),c<=400)e.css("width","100%").find(".image-wrapper").parent().removeClass("fav-img-fixed");else{var m=e.find(".image-wrapper").parent();m.hasClass("fav-img-fixed")||m.addClass("fav-img-fixed"),e.css("width","")}}else e.css({paddingLeft:"",paddingRight:""})},m=function(b){f.debug&&console.log(b)},n=function(c){return a.ajax({method:"GET",url:c,cache:!1})};return i(),j(),e.css({"max-width":f.containerWidth,margin:"0px auto"}),e}}(jQuery);