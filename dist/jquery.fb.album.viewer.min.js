/*
 * https://github.com/research-and-develop/jquery-fb-album-viewer
 * Released under the MIT license
 */
 !function(i){i.fn.FacebookAlbumViewer=function(a){var e={STYLE_ID:"fb-album-viewer-style",API_URL:"https://graph.facebook.com/",FIELDS:["id","created_time","from","height","icon","images","link","name","picture","updated_time","width","source"],TMPL_IMG:'<div class="fav-col fav-xxs-12 fav-lg-3 fav-md-3 fav-sm-4 fav-xs-6">   <div class="image-wrapper" id="[@img-id@]">      <a target="_blank" href="[@img-href@]">         <img src="[@img-url@]" class="fb-album-viewer-img" [@img-style@]>      </a>      [@likes-box@]   </div></div>',TMPL_LIKES_BOX:'<table class="likes-box">   <tbody>      <tr>         <td valign="middle"><img src="https://embedsocial.com/image/like.png"></td>         <td valign="middle"><span class="likes"></span></td>      </tr>   </tbody></table>',TAG_IMG_HREF:"[@img-href@]",TAG_IMG_ID:"[@img-id@]",TAG_IMG_URL:"[@img-url@]",TAG_LIKES:"[@likes-box@]",TAG_IMG_STYLE:"[@img-style@]",IMG_W:"[@img-width@]",IMG_H:"[@img-height@]"},t={account:"",accessToken:"",albumId:"",showLikes:!1,debug:!1,containerWidth:820,imgFixedWidth:!0,imgWidth:190,imgHeight:190,limit:100},d=i(this),s=i.extend({},t,a),f=null,l='<style type="text/css" id="'+e.STYLE_ID+'">';l+=".fav-img-fixed{float: left; padding:0px 5px;}",l+='.fb-album-viewer-wrapper:before,.fb-album-viewer-wrapper:after{display: table;content: " ";}.fb-album-viewer-wrapper:after{clear: both;}',l+=".fav-col{position: relative;min-height: 1px;padding-right: 15px;padding-left: 15px;}",l+=".likes-box { background-color: rgba(0, 0, 0, 0.5); color: white; position: absolute; left: 5px; bottom: 10px; padding: 0px 5px; z-index: 1; font-size: 12px; display: block; border-radius: 3px;}",l+=".likes{color:white;}",l+=".fb-album-viewer-img{position: absolute; top: -9999px; left: -9999px; right: -9999px; bottom: -9999px; margin: auto;}",l+=".image-wrapper{position: relative; overflow: hidden; margin:5px auto;}.image-wrapper img{max-width: none;}",l+=".fav-xs-1,.fav-xs-2,.fav-xs-3,.fav-xs-4,.fav-xs-5,.fav-xs-6,.fav-xs-7,.fav-xs-8,.fav-xs-9,.fav-xs-10,.fav-xs-11,.fav-xs-12{float: left;}.fav-xs-12{width: 100%;}.fav-xs-11 {width: 91.66666667%;}.fav-xs-10 {width: 83.33333333%;}.fav-xs-9 {width: 75%;}.fav-xs-8 {width: 66.66666667%;}.fav-xs-7 {width: 58.33333333%;}.fav-xs-6 {width: 50%;}.fav-xs-5 {width: 41.66666667%;}.fav-xs-4 {width: 33.33333333%;}.fav-xs-3 {width: 25%;}.fav-xs-2 {width: 16.66666667%;}.fav-xs-1 {width: 8.33333333%;}",l+=".image-wrapper{width: "+e.IMG_W+"px; height: "+e.IMG_H+"px;}",l+=" @media (min-width: 1200px) {.fav-lg-1, .fav-lg-2, .fav-lg-3, .fav-lg-4, .fav-lg-5, .fav-lg-6, .fav-lg-7, .fav-lg-8, .fav-lg-9, .fav-lg-10, .fav-lg-11, .fav-lg-12 {float: left;}.fav-lg-12 {width: 100%;}.fav-lg-11 {width: 91.66666667%;}.fav-lg-10{width: 83.33333333%;}.fav-lg-9 {width: 75%;}.fav-lg-8{width: 66.66666667%;}.fav-lg-7{width: 58.33333333%;}.fav-lg-6{width: 50%;}.fav-lg-5{width: 41.66666667%;}.fav-lg-4{width: 33.33333333%;}.fav-lg-3{width: 25%;}.fav-lg-2{width: 16.66666667%;}.fav-lg-1{width: 8.33333333%;}}",l+="</style>";var r=function(){var a=!1;i("head").children().each(function(i,t){return"STYLE"==t.tagName&&t.id==e.STYLE_ID?(a=!0,!1):void 0}),a||i(l.replace(e.IMG_W,s.imgWidth).replace(e.IMG_H,s.imgHeight)).appendTo("head")},n=function(){if(!s.accessToken.length)return void console.error("accessToken is missing cannot proceed ...");if(!s.albumId.length)return void console.error("albumId is missing cannot proceed ...");var i=e.API_URL+s.albumId+"/photos?limit="+s.limit+"&access_token="+s.accessToken+"&fields="+e.FIELDS.join(",");h(i).then(function(i,a,e){v("success ..."),v(i),"undefined"!=typeof i.data&&o(i.data)},function(i,a,e){v("failed ..."),v(e)})},o=function(a){for(var t="",l=0;l<a.length;l++){var r=a[l],n=r.images[r.images.length-1],o=e.TMPL_IMG.replace(e.TAG_IMG_HREF,r.link).replace(e.TAG_IMG_ID,r.id).replace(e.TAG_IMG_URL,n.source).replace(e.TAG_LIKES,s.showLikes?e.TMPL_LIKES_BOX:"");o=n.width<s.imgWidth||n.height<s.imgHeight?o.replace(e.TAG_IMG_STYLE,'style="object-fit: cover;width: 100%;height: 100%;"'):o.replace(e.TAG_IMG_STYLE,""),t+=o}if(d.html('<div class="fb-album-viewer-wrapper">'+t+"</div>"),s.showLikes)for(var l=0;l<a.length;l++){var r=a[l];!function(a){h(e.API_URL+a+"/likes?access_token="+s.accessToken).then(function(e,t,d){i("#"+a).find(".likes")[0].innerHTML=e.data.length},function(i,a,e){console.log(e)})}(r.id)}s.imgFixedWidth&&(d.find(".image-wrapper").parent().removeClass("fav-col fav-xxs-12 fav-lg-3 fav-md-3 fav-sm-4 fav-xs-6").addClass("fav-img-fixed"),f=d.find(".fb-album-viewer-wrapper").first(),g(),i(window).on("resize",g))},g=function(){var a=i(window).width();a=a>s.containerWidth?s.containerWidth:a;var e=d.find(".image-wrapper").first(),t=e.width(),l=parseFloat(e.parent().css("paddingLeft"))+parseFloat(e.parent().css("paddingRight")),r=Math.floor(a/(t+l)),n=t*r+l*r;if(f.css({width:n+"px",margin:" 0px auto"}),a<s.containerWidth){var o=(a-n)/2;if(4>r?d.css({paddingLeft:o,paddingRight:o}):d.css({paddingLeft:"",paddingRight:""}),400>=a)d.css("width","100%").find(".image-wrapper").parent().removeClass("fav-img-fixed");else{var g=d.find(".image-wrapper").parent();g.hasClass("fav-img-fixed")||g.addClass("fav-img-fixed"),d.css("width","")}}else d.css({paddingLeft:"",paddingRight:""})},v=function(i){s.debug&&console.log(i)},h=function(a){return i.ajax({method:"GET",url:a,cache:!1})};return r(),n(),d.css({"max-width":s.containerWidth,margin:"0px auto"}),d}}(jQuery);