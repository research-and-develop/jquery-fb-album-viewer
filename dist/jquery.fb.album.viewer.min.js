/*
 * https://github.com/research-and-develop/
 * Released under the MIT license
 */
!function(e){e.fn.FacebookAlbumViewer=function(i){var t={STYLE_ID:"fb-album-viewer-style",API_URL:"https://graph.facebook.com/",FIELDS:["id","created_time","from","height","icon","images","link","name","picture","updated_time","width","source"],TMPL_IMG:'<div class="col-xxs-12 col-lg-3 col-md-3 col-sm-4 col-xs-6"><div class="image-wrapper" id="[@img-id@]"><a target="_blank" href="[@img-href@]"><img src="[@img-url@]" class="fb-album-viewer-img"></a>[@likes-box@]</div></div>',TMPL_LIKES_BOX:'<table class="likes-box"><tbody><tr><td valign="middle"><img src="https://embedsocial.com/image/like.png"></td><td valign="middle"><span class="likes"></span></td></tr></tbody></table>',TAG_IMG_HREF:"[@img-href@]",TAG_IMG_ID:"[@img-id@]",TAG_IMG_URL:"[@img-url@]",TAG_LIKES:"[@likes-box@]"},a={account:"stylem.varna",accessToken:"",albumId:"",showLikes:!1,debug:!1},o=e(this),s=e.extend({},a,i),r='<style type="text/css" id="'+t.STYLE_ID+'">';r+=".likes-box { background-color: rgba(0, 0, 0, 0.5); color: white; position: absolute; left: 5px; bottom: 10px; padding: 0px 5px; z-index: 2; font-size: 12px; display: block; border-radius: 3px;}",r+=".likes{color:white;}",r+=".fb-album-viewer-img{position: absolute; top: -9999px; left: -9999px; right: -9999px; bottom: -9999px; margin: auto;}",r+=".image-wrapper{position: relative; overflow: hidden; margin:5px auto;}",r+=" @media (max-width: 9999px) { .image-wrapper{width: 200px; height: 200px;} }",r+=" @media (max-width: 1200px) { .image-wrapper{width: 200px; height: 200px;} }",r+=" @media (max-width: 992px)  { .image-wrapper{width: 250px; height: 250px;} .likes-box { bottom: 15px;} }",r+=" @media (max-width: 768px) { .image-wrapper{width: 320px; height: 320px;} .likes-box { bottom: 50px;} }",r+=" @media (max-width: 640px) { .image-wrapper{width: 300px; height: 300px;} .likes-box { bottom: 40px;} }",r+=" @media (max-width: 600px) { .image-wrapper{width: 270px; height: 270px;} .likes-box { bottom: 30px;} }",r+=" @media (max-width: 550px) { .image-wrapper{width: 260px; height: 260px;} .likes-box { bottom: 20px;} }",r+=" @media (max-width: 500px) { .image-wrapper{width: 320px; height: 320px;} .col-xxs-12{width: 100%;} .likes-box { bottom: 55px;} }",r+="</style>";var d=function(){var i=!1;e("head").children().each(function(e,a){return"STYLE"==a.tagName&&a.id==t.STYLE_ID?(i=!0,!1):void 0}),i||e(r).appendTo("head")},n=function(){if(!s.accessToken.length)return void console.error("accessToken is missing cannot proceed ...");if(!s.albumId.length)return void console.error("albumId is missing cannot proceed ...");var e=t.API_URL+s.albumId+"/photos?access_token="+s.accessToken+"&fields="+t.FIELDS.join(",");c(e).then(function(e,i,t){l("success ..."),l(e),"undefined"!=typeof e.data&&p(e.data)},function(e,i,t){l("failed ..."),l(t)})},p=function(i){for(var a="",r=0;r<i.length;r++){var d=i[r];a+=t.TMPL_IMG.replace(t.TAG_IMG_HREF,d.link).replace(t.TAG_IMG_ID,d.id).replace(t.TAG_IMG_URL,d.images[d.images.length-1].source).replace(t.TAG_LIKES,s.showLikes?t.TMPL_LIKES_BOX:"")}if(o.html('<div class="row">'+a+"</div>"),s.showLikes)for(var r=0;r<i.length;r++){var d=i[r];!function(i){c(t.API_URL+i+"/likes?access_token="+s.accessToken).then(function(t,a,o){e("#"+i).find(".likes")[0].innerHTML=t.data.length},function(e,i,t){console.log(t)})}(d.id)}},l=function(e){s.debug&&console.log(e)},c=function(i){return e.ajax({method:"GET",url:i,cache:!1})};return d(),n(),o}}(jQuery);